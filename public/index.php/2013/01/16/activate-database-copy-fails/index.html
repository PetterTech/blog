<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Exchange: Activate Database Copy fails | PetterTech</title>
<meta name="keywords" content="DAG, database action failed, Exchange, hr=0x80004005 ec=-1216, Unable to mount database">
<meta name="description" content="After some exchange services failed on one of the nodes in our Exchange 2010 DAG we got some problems with one database. The database was mounted on server2 where it has an activation preference of 2.
Trying to manually activate the database on server1, where is has an activation preference of 1, resulted in the following error:
——————————————————–
Microsoft Exchange Error
——————————————————–
Cannot activate database copy ‘Activate Database Copy…’.
Activate Database Copy…">
<meta name="author" content="nerenther">
<link rel="canonical" href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/index.php/2013/01/16/activate-database-copy-fails/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.bf5f9f73cf17311d52cedbcda82c922e91b2f566d88a85ad9f5b5a08b586bd5f.css" integrity="sha256-v1&#43;fc88XMR1SztvNqCySLpGy9WbYioWtn1taCLWGvV8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.fac638d29b1850be00dc7293f352d808596a07979e190a08c5fe93492d9df1e9.js" integrity="sha256-&#43;sY40psYUL4A3HKT81LYCFlqB5eeGQoIxf6TSS2d8ek="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/apple-touch-icon.png">
<link rel="mask-icon" href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Exchange: Activate Database Copy fails" />
<meta property="og:description" content="After some exchange services failed on one of the nodes in our Exchange 2010 DAG we got some problems with one database. The database was mounted on server2 where it has an activation preference of 2.
Trying to manually activate the database on server1, where is has an activation preference of 1, resulted in the following error:
——————————————————–
Microsoft Exchange Error
——————————————————–
Cannot activate database copy ‘Activate Database Copy…’.
Activate Database Copy…" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/index.php/2013/01/16/activate-database-copy-fails/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-01-16T09:07:50+00:00" />
<meta property="article:modified_time" content="2013-01-16T09:07:50+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Exchange: Activate Database Copy fails"/>
<meta name="twitter:description" content="After some exchange services failed on one of the nodes in our Exchange 2010 DAG we got some problems with one database. The database was mounted on server2 where it has an activation preference of 2.
Trying to manually activate the database on server1, where is has an activation preference of 1, resulted in the following error:
——————————————————–
Microsoft Exchange Error
——————————————————–
Cannot activate database copy ‘Activate Database Copy…’.
Activate Database Copy…"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Exchange: Activate Database Copy fails",
      "item": "https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/index.php/2013/01/16/activate-database-copy-fails/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Exchange: Activate Database Copy fails",
  "name": "Exchange: Activate Database Copy fails",
  "description": "After some exchange services failed on one of the nodes in our Exchange 2010 DAG we got some problems with one database. The database was mounted on server2 where it has an activation preference of 2.\nTrying to manually activate the database on server1, where is has an activation preference of 1, resulted in the following error:\n——————————————————–\nMicrosoft Exchange Error\n——————————————————–\nCannot activate database copy ‘Activate Database Copy…’.\nActivate Database Copy…",
  "keywords": [
    "DAG", "database action failed", "Exchange", "hr=0x80004005 ec=-1216", "Unable to mount database"
  ],
  "articleBody": "After some exchange services failed on one of the nodes in our Exchange 2010 DAG we got some problems with one database. The database was mounted on server2 where it has an activation preference of 2.\nTrying to manually activate the database on server1, where is has an activation preference of 1, resulted in the following error:\n——————————————————–\nMicrosoft Exchange Error\n——————————————————–\nCannot activate database copy ‘Activate Database Copy…’.\nActivate Database Copy…\nFailed\nError:\nAn Active Manager operation failed. Error: The database action failed. Error: Operation failed with message: MapiExceptionJetErrorAttachedDatabaseMismatch: Unable to mount database. (hr=0x80004005, ec=-1216)\n. [Database: DB1, Server: server1]\nAn Active Manager operation failed. Error: Operation failed with message: MapiExceptionJetErrorAttachedDatabaseMismatch: Unable to mount database. (hr=0x80004005, ec=-1216)\n. [Server: server1]\nMapiExceptionJetErrorAttachedDatabaseMismatch: Unable to mount database. (hr=0x80004005, ec=-1216)\n——————————————————–\nOK\n——————————————————–\nThe solution is actually quite simple:\nSuspend the database copy on server1 and update the database copy. Then try to activate the database copy again.\nMore detailed steps:\nUsing the Exchange management shell:\nSuspend-MailboxDatabaseCopy -Identity DB1Server1\nUpdate-MailboxDatabaseCopy -Identity DB1Server1 -SourceServer Server2\nMove-ActiveMailboxDatabase DB2 -ActivateOnServer MBX1\nUsing the Exchange Management Console:\nNavigate to Server Configuration–\u003eMailbox and select Server1\nRight click the database and click Suspend Database Copy\nRight click the database and click Update Database Copy\nIn the wizard select server2 as the source server and click Update\nWhen the job completes right click the database again and click Activate Database Copy\n",
  "wordCount" : "232",
  "inLanguage": "en",
  "datePublished": "2013-01-16T09:07:50Z",
  "dateModified": "2013-01-16T09:07:50Z",
  "author":{
    "@type": "Person",
    "name": "nerenther"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/index.php/2013/01/16/activate-database-copy-fails/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PetterTech",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net" accesskey="h" title="PetterTech (Alt + H)">PetterTech</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Exchange: Activate Database Copy fails
    </h1>
    <div class="post-meta"><span title='2013-01-16 09:07:50 +0000 +0000'>January 16, 2013</span>&nbsp;·&nbsp;nerenther

</div>
  </header> 
  <div class="post-content"><p>After some exchange services failed on one of the nodes in our Exchange 2010 DAG we got some problems with one database. The database was mounted on server2 where it has an activation preference of 2.<br>
Trying to manually activate the database on server1, where is has an activation preference of 1, resulted in the following error:</p>
<p>——————————————————–<br>
Microsoft Exchange Error<br>
——————————————————–<br>
Cannot activate database copy ‘Activate Database Copy…’.</p>
<p>Activate Database Copy…<br>
Failed<br>
Error:<br>
An Active Manager operation failed. Error: The database action failed. Error: Operation failed with message: MapiExceptionJetErrorAttachedDatabaseMismatch: Unable to mount database. (hr=0x80004005, ec=-1216)<br>
. [Database: DB1, Server: server1]</p>
<p>An Active Manager operation failed. Error: Operation failed with message: MapiExceptionJetErrorAttachedDatabaseMismatch: Unable to mount database. (hr=0x80004005, ec=-1216)<br>
. [Server: server1]</p>
<p>MapiExceptionJetErrorAttachedDatabaseMismatch: Unable to mount database. (hr=0x80004005, ec=-1216)</p>
<p>——————————————————–<br>
OK<br>
——————————————————–</p>
<p> </p>
<p>The solution is actually quite simple:</p>
<p>Suspend the database copy on server1 and update the database copy. Then try to activate the database copy again.</p>
<p>More detailed steps:<br>
Using the Exchange management shell:<br>
Suspend-MailboxDatabaseCopy -Identity DB1Server1<br>
Update-MailboxDatabaseCopy -Identity DB1Server1 -SourceServer Server2<br>
Move-ActiveMailboxDatabase DB2 -ActivateOnServer MBX1</p>
<p>Using the Exchange Management Console:<br>
Navigate to Server Configuration–&gt;Mailbox and select Server1<br>
Right click the database and click Suspend Database Copy<br>
Right click the database and click Update Database Copy<br>
In the wizard select server2 as the source server and click Update<br>
When the job completes right click the database again and click Activate Database Copy</p>
<p> </p>
<p> </p>
<p> </p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/tags/dag/">DAG</a></li>
      <li><a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/tags/database-action-failed/">database action failed</a></li>
      <li><a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/tags/exchange/">Exchange</a></li>
      <li><a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/tags/hr0x80004005-ec-1216/">hr=0x80004005 ec=-1216</a></li>
      <li><a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net/tags/unable-to-mount-database/">Unable to mount database</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://blue-cliff-0fe9f2b03.3.azurestaticapps.net">PetterTech</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
